{% extends 'layouts/general.html' %}
{% load static %}

{% block title %}{{ product.title }} | Product Details{% endblock %}





{% block container %}
    <div class="bg-white mt-4">
        <div class="max-w-[1500px] mx-auto">
            <div class="grid grid-cols-10 gap-4">

                <!-- product image -->
                <div id="details-product-images" data-product-id="{{ product.id }}"
                     data-product-slug="{{ product.slug }}" class="col-span-4 p-10">
                    <img
                            class="object-contain object-top sm:max-w-xs lg:max-w-sm w-fit mx-auto md:mx-0"
                            src="https://m.media-amazon.com/images/I/31NDLo8vP7L._AC_SY200_.jpg"
                            alt="{{ product.name }}"
                    />
                </div>
                <!-- product details -->
                <section class="col-span-6 flex flex-col gap-4">
                    <h1 class="text-base md:text-2xl font-semibold">
                        {{ product.name }}
                    </h1>

                    <!-- rating stars -->
                    <p class="text-amber-500 text-xs">
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star-half-stroke"></i>
                        <i class="fa-regular fa-star"></i>
                        <span class="text-gray-500 ml-2">(123 ratings)</span>
                    </p>
                    <hr class="mt-1"/>

                    <h2>&#8377;<span class="text-3xl">{{ product.price }}</span></h2>
                    <h3 class="text-gray-500 text-xs">
                        M.R.P.: <span class="line-through">&#8377;{{ product.mrp }}</span>
                    </h3>

                    <img
                            class="w-16 object-contain py-1"
                            src="https://m.media-amazon.com/images/G/31/marketing/fba/fba-badge_18px._CB485936079_.png"
                            alt="Fulfilled by Amazon"
                    />
                    <p>Inclusive of all taxes</p>
                    <hr class="my-3"/>

                    <!-- Offers -->
                    <h4 class="flex items-center gap-3 md:gap-4 pt-2">
                        <img class="w-6" src="{{ offer_icon_url }}" alt="Offers"/>
                        <p class="font-bold text-base">Offers</p>
                    </h4>
                    <section id="details-offer-slider" class="w-full list-none flex gap-3 items-center">
                        {% for offer in product.offers %}
                            <div class="bg-gray-100 p-2 rounded-md text-xs">{{ offer }}</div>
                        {% endfor %}
                    </section>

                    <hr class="my-3"/>

                    <!-- Benefits -->
                    <div id="data-product-discounts" data-product-slug="{{ product.slug }}"
                         data-product-id="{{ product.id }}"></div>

                    <hr class="my-3"/>
                    <div id="data-product-variants" data-product-slug="{{ product.slug }}"
                         data-product-id="{{ product.id }}"></div>


                    <!-- Buttons -->
                    <div class="py-6 flex flex-col gap-4 items-center md:flex-row">
                        <!-- Add to Cart Button -->
                        <form method="post" class="w-full md:w-auto">
                            {% csrf_token %}
                            <button
                                    type="submit"
                                    class="w-full md:w-[220px] px-6 py-3 bg-white border border-yellow-400 text-yellow-600 font-medium rounded-full shadow-sm hover:bg-yellow-50 hover:shadow-md active:scale-95 transition-all duration-300"
                            >
                                Add to Cart
                            </button>
                        </form>

                        <!-- Buy Now Button -->
                        <form method="post" action="{% url 'buy_now' product.slug %}" class="w-full md:w-auto">
                            {% csrf_token %}
                            <button
                                    type="submit"
                                    class="w-full md:w-[220px] px-6 py-3 bg-yellow-500 text-white font-semibold rounded-full shadow hover:shadow-lg hover:bg-yellow-600 active:scale-95 transition-all duration-300"
                            >
                                Buy Now
                            </button>
                        </form>
                    </div>

                </section>
            </div>

            <!-- Product Description -->
            <section class="px-4 md:px-10 py-6 border-t">
                <h2 class="text-xl font-semibold mb-2">Product Description</h2>
                <p class="text-sm text-gray-700">{{ product.description|linebreaks }}</p>
            </section>

            <!-- Specifications -->
            <section class="px-4 md:px-10 py-6 border-t">
                <h2 class="text-xl font-semibold mb-2">Specifications</h2>
                <ul class="text-sm list-disc pl-6 space-y-1">
                    {% for spec in product.specifications %}
                        <li><strong>{{ spec.name }}:</strong> {{ spec.value }}</li>
                    {% endfor %}
                </ul>
            </section>

            <!-- Customer Reviews -->
            <section class="px-4 md:px-10 py-6 border-t">
                <div id="details-product-review" data-user="{{ request.user }}" data-product-slug="{{ product.slug }}"
                     data-product-id="{{ product.id }}"></div>
            </section>
            <!-- Frequently Bought Together -->
            <section class="px-4 md:px-10 py-6 border-t">
                <h2 class="text-xl font-semibold mb-4">Frequently Bought Together</h2>
                <div class="flex overflow-x-auto gap-4">
                    {% for item in product.frequently_bought %}
                        <div class="min-w-[150px] w-[150px] flex-shrink-0">
                            <img src="{{ item.img_url }}" alt="{{ item.title }}" class="w-full h-32 object-contain">
                            <p class="text-sm mt-1">{{ item.title }}</p>
                        </div>
                    {% endfor %}
                </div>
            </section>

            <!-- Similar Products -->
            <section class="px-4 md:px-10 py-6 border-t">
                <h2 class="text-xl font-semibold mb-4">Similar Products</h2>
                <div id="details-product-similar" data-user="{{ request.user }}" data-product-slug="{{ product.slug }}"
                     data-product-id="{{ product.id }}"></div>
            </section>

            <!-- Compare with Similar Items -->
            <section class="px-4 md:px-10 py-6 border-t">
                <h2 class="text-xl font-semibold mb-4">Compare with similar items</h2>
                <div id="details-product-compare" data-user="{{ request.user }}" data-product-slug="{{ product.slug }}"
                     data-product-id="{{ product.id }}"></div>
            </section>

        </div>
    </div>
{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/detailspageimageslider.bundle.js' %}"></script>
    <script src="{% static 'js/detailspageproductvariant.bundle.js' %}"></script>
    <script src="{% static 'js/detailspageproductdiscount.bundle.js' %}"></script>
    <script src="{% static 'js/detailspageproductreview.bundle.js' %}"></script>
{% endblock %}